<%- include('./_head.ejs') %>
<div class="container mt-4">
  <h1>Employees</h1>
  <table class="table mb-4">
    <thead>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Title</th>
      <th>Salary</th>
      <th>Sick Leave Hours</th>
      <th>Annual Leave Hours</th>
      <th>Company</th>
      <th>Created At</th>
      <th>Updated At</th>
      <th colspan="3">Actions</th>
    </thead>
    <tbody>
      <% for (const it of employees) { %>
      <tr>
        <td><%= it.first_name %></td>
        <td><%= it.last_name %></td>
        <td><%= it.title %></td>
        <td><%= formatCurrency(it.salary) %></td>
        <td><%= it.sick_leave_hours %></td>
        <td><%= it.annual_leave_hours %></td>
        <td><%= it.company?.name %></td>
        <td><%= formatDate(it.created_at) %></td>
        <td><%= formatDate(it.updated_at) %></td>
        <td>
          <a href="/employees/<%= it.id %>" class="btn btn-primary">Show</a>
        </td>
        <td>
          <a href="/employees/edit/<%= it.id %>" class="btn btn-success"
            >Edit</a
          >
        </td>
        <td>
          <form action="/employees/delete/<%= it.id %>" method="POST">
            <%- include(locals.LayoutPages._csrf) %>
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
  <a href="/employees/new" class="btn btn-primary">New Employee</a>
</div>
<%- include('../_layouts/_tail.ejs') %>
